#!/usr/bin/env bash

configDir="$(dirname "$(dirname "$(realpath "${BASH_SOURCE[0]}")")")"

localXdgDir='.xdg2'

export XDG_CONFIG_HOME="${configDir}"
export XDG_DATA_HOME="${configDir}/${localXdgDir}/data"
export XDG_STATE_HOME="${configDir}/${localXdgDir}/state"
export XDG_CACHE_HOME="${configDir}/${localXdgDir}/cache"
nvimAppName="${NVIM_APPNAME:-nvim}"

mkdir -p "$XDG_CACHE_HOME/${nvimAppName}" "$XDG_STATE_HOME" "$XDG_DATA_HOME"

"${NVIM_FROM_SRC_DIR}/bin/nvim" "$@"
