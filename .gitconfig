[alias]
	top = rev-parse --show-toplevel
	list-submodules = submodule foreach --quiet 'echo $toplevel/$sm_path'
	add-submodules = !"bash -c 'mapfile -t submodules < <(git list-submodules); git add --verbose \"${submodules[@]}\"'"
	list-changed-submodules = !"bash -c 'mapfile -t submodules < <(git list-submodules); git diff --name-only --ignore-submodules=dirty \"${submodules[@]}\"'"
	list-non-submodules = !bash -c 'git list-submodules | sort | comm -13 - <(ls -1d "$(git top)/pack/bundle/"*/*)'
	ci-submodules = commit -m 'Upgrade vim plugins'
	cvs = !git add-submodules && git ci-submodules
	ci-coc-extensions = "!git add --update \"$(git top)/.config/coc/extensions\"; git commit -m 'Upgrade CoC extensions'"
	su = submodule update --init --recursive
	sur = submodule update --init --recursive --remote
